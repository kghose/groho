TODO
====

double v float
--------------
We use `double` in simuluation but `float` for display. There should be a
principled way to do the conversion to avoid visual glitches like quantization
and spurious offsets. We will cross this bridge when we come to it, i.e. when
we actually see it in the simulations